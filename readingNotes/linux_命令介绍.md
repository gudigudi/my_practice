script: 记录会话命令
``` bash
script
Script started, file is typescript  # 开始记录会话
...
what you do
...
exit                                # 结束会话，并将会话内容记录在
                                    # typescript文件中
```

``` bash
script myfilename                   # 将会话内容记录到myfilename中
```
```
script -a                           # 添加新的对话内容
```

### 文件类型
| 类型 | 定义 |
| ---- | ---- |
| 常规 | 普通文件 |
| 目录 | 目录文件 |
| 字符 | 与终端设备(键盘等)相关的文件, 每次读取或写入一个字符 |
| 块   | 与物理设备(硬盘等)相关的文件, 每次读取或写入一个数据块 |
| 链接 | 作为一种逻辑文件，定义了另一个位于系统中的文件的位置 |
| FIFO | 命名管道，用于进程间通信的文件 |
| Socket | 用于网络通信的特殊文件 |

### more命令的显示选项
| 选项 | 解释 |
| ---- | ---- |
| -c   | 在显示之前清屏 |
| -d   | 显示出错消息 |
| -f   | 对长行不作屏幕换行 |
| -l   | 忽略换页符 |
| -r   | 以格式^C显示控制字符 |
| -s   | 对多个空行进行压缩(在输出中只保留一个空行) |
| -u   | 取消文本下划线 |
| -w   | 在输出结束处等待，以便用户输入任何键来继续 |
| -lines | 设置一屏所显示的行数(默认值为屏幕大小-2) |
| +nmbr | 东指定的行号开始输出 |
| +/ptrn | 定位第一个模式出现的位置，并且从该位置前两行处开始输出 |

### Shell简介
环境变量

$SHELL  : 当前shell

$0      : 当前shell

重定向:
>   : 当文件已存在时，发出错误提示

>|  : 覆盖原文件

>>  : 添加到原文件

特殊字符:

\   : 转义字符

"   : 去掉元字符的特殊解释

'   : 比"更强，可以将包围的元字符都视为文字字符

`date` : 获取date命令的输出结果

别名:

alias name=command-definition

unalias : 取消别名

预定义变量

| bash | 解释 |
| ---- | ---- |
| CDPATH | 当目录参数是一个相对路径名时，包含cd命令的搜索路径 |
| EDIROE | 命令行编辑器的路径名 |
| ENV    | 环境文件的路径名 |
| HOME   | 用户根目录的路径名 |
| PATH   | 命令的搜索路径 |
| PS1    | 主要提示符，如$和% |
| SHELL  | 登陆shell的路径名 |
| TEAM   | 终端类型 |
| TMOUT  | 定义自动注销之前的等待时间，单位为秒 |
| VISAUL | 命令行编辑器的路径名 |

### 过滤器

常用过滤器

| 过滤器 | 动作 |
| ------ | ---- |
| more   | 把所有输入数据传递到输出，并在每个数据屏的结尾处停顿 |
| cat    | 把所有输入数据传递到输出 |
| cmp    | 比较两个文件 |
| comm   | 标记两个文件中的公用行 |
| cut    | 只传递特定行 |
| diff   | 标记两个文件之间的差别或两个目录下公用文件的差别 |
| head   | 传递从数据开始处开始指定的行数 |
| paste  | 结合列 |
| sort   | 将数据排列 |
| tail   | 传递从数据结尾处开始指定的行数 |
| tr     | 转换一个或多个字符为特定字符 |
| uniq   | 删除重复行 |
| wc     | 对字符、单词或行计数 |
| 后面将提到 |
| grep   | 只传递指定行 |
| sed    | 传递被编辑行 |
| awk    | 传递被编辑行，并解析行 |

排序命令选项:

| 选项 | 代码 | 结果 |
| ---- | ---- | ---- |
| 检查顺序    | -c | 检验数据排序的正确性 |
| 替换分隔符  | -t | 指定替代分隔符，默认为: 制表符和空格 |
| 数字式排序　| -n | 数据是数字，而不是字符串，默认为: 字符串数据 |
| 合并　　　  | -m | 输入文件被排序，合并结果 |
| 唯一性排序  | -u | 删除重复的排序字段，只保留最后一个 |
| 逆向排序    | -r | 按降序排序数据 |
| 忽略前导空格| -b | 把前导空格看做分隔字段的一个空格 |
| 字典排序    | -d | 首先排序特殊字符 |
| 重叠大小写　| -f | 不区分大小写的排序 |

###vi

局部命令

| 命令 | 解释 |
| ---- | ---- |
| i/I  | 插入文本 |
| a/A  | 附加文本 |
| o/O  | 换行　　 |
| r/R  | 替换文本 |
| s/S  | 替代文本 |
| x/X  | 删除文本 |
| m    | 标记文本 |
| ~    | 更改大小写 |
| p/P  | 粘贴 |
| J    | 合并 |

范围对象

| 对象 | 设计器 | 描述 |
| ---- | ------ | ---- |
| 字符 | h      | 光标前字符 |
|      | l      | 光标后字符 |
| 行　 | 0, $   | 当前行开始和结尾 |
|      | -, +   | 上一行和下一行开始 |
|      | k, j   | 上一行和下一行 |
| 单词 | b      | 返回到单词的开始 |
|   　 | w      | 前移到下一单词的开始 |
|      | e      | 前移到单词结尾 |
| 句子 | (, )   | 句子的开始和结尾 |
| 段落 | {, }   | 段落的开始和结尾 |
| 块　 | `x     | 由标记符x指示的字符 |
| 　　 | 'x     | 有标记符x指示的行的开始 |
| 屏幕 | H, L, M| 分别为上、下或中间行的开始 |
| 文件 | G      | 文件最后一行的开始 |

###正则表达式

正则表达式包括: 原子, 运算符

原子的类型: 单一字符, 点, 类, 锚, 先后引用

点(.): 一个点匹配除了换行符(\n)外的任意单个字符

类: 字符集([]), 使用^表示非
``` bash
[A-Z]   :   任意大写字母
[0-9]   :   任意数字
[[a]    :   [或a
[0-9\-] :   数字或破折号
[^AB]   :   除A和B外的任意字符
[A-Za-z]:   任意字母
[^\^]   :   除^之外的任意字符
```

锚: 在将模式与字符串的特定部分进行对齐时使用的原子

锚不是匹配文本, 而是定义模式中下一个字符在文本中必须出现的位置

锚的类型: 行首(^) 行尾($) 单词开头(\<) 单词结尾(\>)
``` bash
^Q   : 以Q开头的一个字符串
q\>  : 以q结尾的单词
```

### 运算符

类型: 序列 空, 交换 |, 重复 \{m,n\}, 组(...), 保存\(...\)

序列: 序列运算符为空, 它的含义是: 如果原子序列, 如字符序列, 出现在正则表达式中,
则暗示在原子间有一个不可见的序列运算符。
``` bash
dog           #     匹配模式"dog"
a..b          #     匹配a, 接着任意两个字符,　匹配b
[2-4][0-9]    #     匹配20-49之间数字
[0-9][0-9]    #     匹配任意两个数字
^$            #     匹配空行
^.$           #     匹配只有一个字符的行
[0-9]_[0-9]   #     匹配由"_"分隔的两个数字
```

替换: 替换运算符 |, 代表或者

重复: 重复运算符是转义括号　\{...}\的集合，它包含由逗号分隔的两个数字的集合，
它指定重复运算符前的原子或表达式的重复次数。
``` bash
\{m,n\}
```
第1个数字m指出前面的原子在文本中出现的最少次数,　第2个数字n指出它出现的最大次数。

例如:
``` bash
A\{3,5\}      #       匹配"AAA", "AAAA", "AAAAA"
BA\{3,5\}     #       匹配"BAAA", "BAAAA", "BAAAAA"
```

### grep
grep选项

| 选项    | 解释                               |
| ------- | ---------------------------------- |
| -b      | 在每一行前加上所在的文件块编号     |
| -c      | 只打印匹配模式的行编号记号         |
| -i      | 在匹配文本时忽略大小写             |
| -l      | 打印至少有一行匹配模式的文件列表   |
| -n      | 在每行前显示其行编号               |
| -s      | 哑模式。执行其功能，但抑制所有输出 |
| -v      | 逆向输出。打印不匹配模式的行       |
| -x      | 只打印完全匹配模式的行             |
| -f file | 要匹配的字符串列表在file中         |

### sed
sed是流编辑器(Stream editor)的头字母缩写词，sed按行对输入文件进行浏览，对输入文
件的每行执行指令列表(sed脚本)

### awk
BEGIN和END模式
``` bash
BEGIN
{
  FS = "\t";
  OFS = "\t";
} # end BEGIN


END
{
  print{"Total Sales:", totalSales}
} # end END
```

####表达式:
awk实用程序支持4个表达式: 正则，算术，关系和逻辑。
* 正则表达式
> awk正则表达式(regexp)是那些在egrep中定义的表达式。除了表达式外，awk需要两运算
> 符之一: 匹配(~)和不匹配(!~)。使用正则表达式时，记住它必须放在两个斜线“/”和“/”
> 之间。

* 算法表达式
> 算术表达式是算术运算符的结果。如果表达式是算术的，当值为非0时，即为正或负时，
> 它匹配记录；值为0(false)时不匹配记录。
awk算术表达式

| 运算符    | 举例          | 说明                          |
| --------- | ------------- | ----------------------------- |
| */%^      | a^2           | 变量a的2次方(a<sup>2</sup>)   |
| ++        | ++a  a++      | a加1                          |
| --        | --a  a--      | a减1                          |
| + -       | a+b, a-b      | 两值相加或相减                |
| +         | +a            | 一元加号: 值不变              |
| -         | -a            | 一元减号: 值求补              |
| =         | a=0           | a赋值为0                      |
| *=        | x*=y          | 等式x=x*y; 将x*y结果赋值给x   |
| /=        | x/=y          | 等式x=x/y; 将x/y结果赋值给x   |
| %=        | x%=y          | 等式x=x%y; 将x%y结果赋值给x   |
| +=        | x+=y          | 等式x=x+y; 将x+y结果赋值给x   |
| -=        | x-=y          | 等式x=x-y; 将x-y结果赋值给x   |

* 关系表达式
> 关系表达式比较两值。

* 逻辑表达式
> 逻辑表达式使用逻辑运算符联结两个或多个表达式(&&, ||, !)

## 预定义变量
shell变量及意义

| 变量          | 意义                                        |
| ------------- | ------------------------------------------- |
| COLUMNS       | 显示器按字符显示的宽度                      |
| HISTSIZE      | 历史文件中命令的最小数                      |
| HOME          | 主目录的完整路径名                          |
| LINENO        | 函数或脚本中的行号                          |
| LINES         | 显示器按行显示的高度                        |
| LOGNAME       | 用户登录名                                  |
| OPTIND        | 选项后第1个参数的编号                       |
| PATH          | 命令的搜索路径                              |
| PPID          | 父进程的进程ID(PID)                         |
| PWD           | 当前工作目录                                |
| RANDOM        | 0到32,767之间(包括它们在内)的随机数         |
| SECONDS       | shell被激活之后的秒数                       |
| SHELL         | shell的完整路径名                           |
| TERM          | 终端类型                                    |
| USER          | 用户id                                      |
